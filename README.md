# Fullstack Web3 Token Minting Application

A production-ready full-stack Web3 application for minting and managing ERC-20 tokens on the Ethereum Sepolia testnet. This project combines a modern Next.js frontend with smart contract integration, providing a seamless experience for token minting, balance tracking, and transaction history.

## üìã Overview

This application consists of two main components:

1. **Frontend/Backend** (`frontend-backend/`): A Next.js 16 application with React 19 that provides:
   - Multi-wallet support (MetaMask, Coinbase Wallet, WalletConnect)
   - Token minting interface
   - Real-time balance tracking
   - Transaction history with Etherscan links
   - RESTful API endpoints for wallet data
   - Database integration with Supabase

2. **Smart Contracts** (`smart-contracts/`): Hardhat-based Solidity project featuring:
   - ERC-20 token contract (Tier3Token/T3T)
   - Public minting functionality
   - Deployment scripts for Sepolia testnet

## üìã Deployed Contract Details

**Network:** Sepolia Testnet

**Contract Address:** `0x49d4a94E80FD4c13A7c2B4984620E00F5423EFE2`

**Token Symbol:** T3T (Tier3Token)

**Etherscan Link:** [View on Sepolia Etherscan](https://sepolia.etherscan.io/address/0x49d4a94E80FD4c13A7c2B4984620E00F5423EFE2)

## üöÄ Prerequisites

### Required Software
- **Node.js**: Version 20.x or higher
- **npm**: Version 10.x or higher (comes with Node.js)
- **Git**: For version control

### Optional (for full development)
- **Docker & Docker Compose**: For containerized deployment
- **MetaMask**: Browser extension for Web3 wallet interaction
- **VS Code**: Recommended IDE with TypeScript support

### Required Accounts & API Keys
- **Alchemy Account**: For Ethereum RPC provider (Sepolia testnet)
  - Sign up at [Alchemy Dashboard](https://dashboard.alchemy.com/)
  - Create an app for Ethereum Sepolia network
- **Supabase Account**: For database and backend services
  - Sign up at [Supabase Dashboard](https://supabase.com/dashboard)
  - Create a new project

## üì¶ Installation & Setup

### 1. Clone the Repository

```bash
git clone <repository-url>
cd fullstack-exam
```

### 2. Frontend/Backend Setup

```bash
cd frontend-backend
npm install
```

Create a `.env.local` file in the `frontend-backend/` directory:

```env
# Alchemy API (Sepolia Testnet)
NEXT_PUBLIC_ALCHEMY_API_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
ALCHEMY_API_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY

# Supabase Configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
SUPABASE_ANON_KEY=your-anon-key

# Optional: WalletConnect
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your-project-id
```

### 3. Smart Contracts Setup

```bash
cd smart-contracts
npm install
```

Create a `.env` file in the `smart-contracts/` directory (optional, for deployment):

```env
SEPOLIA_RPC_URL=https://eth-sepolia.g.alchemy.com/v2/YOUR_API_KEY
PRIVATE_KEY=your-private-key-for-deployment
ETHERSCAN_API_KEY=your-etherscan-api-key
```

### 4. Database Setup

In your Supabase dashboard, create the following table:

```sql
CREATE TABLE wallet_snapshots (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  address TEXT NOT NULL UNIQUE,
  balance_eth NUMERIC,
  block_number BIGINT,
  last_updated TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_wallet_address ON wallet_snapshots(address);
```

## üèÉ Running the Application Locally

### Frontend/Backend Development Server

```bash
cd frontend-backend
npm run dev
```

The application will be available at [http://localhost:3000](http://localhost:3000)

### Smart Contracts Testing

```bash
cd smart-contracts
npx hardhat test
```

### Smart Contracts Deployment (Optional)

To deploy the contract to Sepolia testnet:

```bash
cd smart-contracts
npx hardhat ignition deploy --network sepolia ignition/modules/Counter.ts
```

**Note**: You'll need Sepolia ETH in your deployment account for gas fees. Get test ETH from [Sepolia Faucet](https://sepoliafaucet.com/).

## üê≥ Docker Compose Usage

The application includes Docker support for easy deployment and development.

### Prerequisites for Docker
- Docker Desktop installed and running
- `.env.local` file configured in `frontend-backend/` directory

### Running with Docker Compose

```bash
cd frontend-backend
docker-compose up -d
```

This will:
- Build the Next.js application
- Start the container on port 3000
- Set up health checks
- Configure automatic restarts

### Docker Commands

```bash
# View logs
docker-compose logs -f

# Stop containers
docker-compose down

# Rebuild and restart
docker-compose up -d --build

# Check container status
docker-compose ps
```

### Docker Environment Variables

The `docker-compose.yml` file automatically loads environment variables from `.env.local`. Ensure all required variables are set before starting Docker containers.

### Health Check

The Docker setup includes a health check endpoint:
```bash
curl http://localhost:3000/api/health
```

## üèóÔ∏è Key Assumptions & Architectural Decisions

### Frontend Architecture
- **Next.js App Router**: Using the latest App Router for better performance and developer experience
- **Client-Side Wallet Connection**: Wallet connections are handled entirely on the client side for security
- **API Routes for Backend Logic**: Sensitive operations (RPC calls, database writes) are handled server-side
- **React Context for State**: Wallet state is managed using React Context API for global access

### Backend Architecture
- **Caching Strategy**: Gas prices and block numbers are cached to reduce RPC calls and improve performance
- **Database Snapshots**: Wallet balances are stored in Supabase for historical tracking and faster retrieval
- **Error Handling**: Comprehensive error handling with fallbacks for RPC failures

### Smart Contract Design
- **Public Minting**: The contract allows anyone to mint tokens (faucet pattern) - suitable for testnet use
- **OpenZeppelin Standards**: Uses OpenZeppelin's battle-tested ERC-20 implementation
- **No Access Control**: Intentionally simplified for demonstration purposes

### Network Configuration
- **Sepolia Testnet**: All operations are configured for Ethereum Sepolia testnet (Chain ID: 11155111)
- **Alchemy RPC**: Uses Alchemy as the primary RPC provider for reliability and performance

### Security Considerations
- **No Private Keys in Code**: All sensitive keys are stored in environment variables
- **Client-Side Transactions**: Users sign transactions with their own wallets (keys never leave the browser)
- **Service Role Isolation**: Supabase service role key is only used server-side

## ‚ö†Ô∏è Known Issues & Limitations

### Current Limitations
1. **Testnet Only**: The application is configured for Sepolia testnet only. Mainnet deployment requires additional security considerations.
2. **Public Minting**: The smart contract allows unrestricted minting. In production, this should be protected with access controls.
3. **No Rate Limiting**: API endpoints don't have rate limiting implemented. Consider adding rate limiting for production use.
4. **Single Network**: The application only supports Sepolia. Multi-network support would require additional configuration.
5. **No Transaction Queue**: Multiple simultaneous transactions may cause issues. Consider implementing a transaction queue.

### Known Issues
1. **Wallet Connection Persistence**: Wallet connections may not persist across page refreshes in some browsers.
2. **RPC Rate Limits**: Heavy usage may hit Alchemy rate limits. Consider implementing request queuing or upgrading the Alchemy plan.
3. **Database Sync**: Wallet snapshots may not always be in sync with on-chain data during high network activity.

### Browser Compatibility
- **Chrome/Edge**: Fully supported (recommended)
- **Firefox**: Supported
- **Safari**: Supported (may require additional configuration for Web3 features)

## üìö Additional Resources

- **Frontend Setup Guide**: See `frontend-backend/SETUP_GUIDE.md` for detailed frontend setup instructions
- **Smart Contracts**: See `smart-contracts/README.md` for Hardhat-specific documentation
- **API Documentation**: Check `frontend-backend/postman_collection.json` for API endpoint examples

## üîó Useful Links

- [Sepolia Etherscan](https://sepolia.etherscan.io/)
- [Alchemy Dashboard](https://dashboard.alchemy.com/)
- [Supabase Dashboard](https://supabase.com/dashboard)
- [Sepolia Faucet](https://sepoliafaucet.com/)
- [MetaMask](https://metamask.io/)

## üìÑ License

MIT License - see LICENSE file for details.
